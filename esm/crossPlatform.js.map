{"version":3,"file":"crossPlatform.js","sourceRoot":"","sources":["../src/crossPlatform.ts"],"names":[],"mappings":"AAkCA;;GAEG;AACH,IAAM,MAAM,GAAG;IAEb,IAAI,UAAU,GAAQ;QACpB,qCAAqC;QACrC,OAAO,EAAE,cAAO,CAAC;QACjB,qCAAqC;QACrC,WAAW,EAAE,cAAO,CAAC;QACrB,qCAAqC;QACrC,iBAAiB,EAAE,cAAO,CAAC;KAC5B,CAAC;IAEF,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QAC1B,0CAA0C;QAC1C,UAAU,GAAG,EAAE,CAAC;KACjB;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,0CAA0C;QAC1C,UAAU,GAAG,EAAE,CAAC;KACjB;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,0CAA0C;QAC1C,UAAU,GAAG,EAAE,CAAC;KACjB;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,0CAA0C;QAC1C,UAAU,GAAG,EAAE,CAAC;KACjB;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,0CAA0C;QAC1C,UAAU,GAAG,EAAE,CAAC;KACjB;SAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QACnC,0CAA0C;QAC1C,UAAU,GAAG,IAAI,CAAC;KACnB;SAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;QAClC,0CAA0C;QAC1C,UAAU,GAAG,GAAG,CAAC;KAClB;SAAM;QACL,IAAI;YACF,wBAAwB;YACxB,qDAAqD;YACrD,0CAA0C;YAC1C,UAAU,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;SACtC;QAAC,OAAM,CAAC,EAAE;YACT,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;SAC3C;KACF;IAED,OAAO,UAAU,CAAC;AACpB,CAAC,CAAC;AAEF;;GAEG;AACH,IAAM,UAAU,GAAG;IACjB,IAAI,cAAc,GAAY,SAAS,CAAC;IAExC,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QAC1B,cAAc,GAAG,QAAQ,CAAC;KAC3B;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,cAAc,GAAG,QAAQ,CAAC;KAC3B;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,cAAc,GAAG,WAAW,CAAC;KAC9B;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,cAAc,GAAG,UAAU,CAAC;KAC7B;SAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,cAAc,GAAG,IAAI,CAAC;KACvB;SAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QACnC,cAAc,GAAG,MAAM,CAAC;KACzB;IAED,OAAO,cAAc,CAAC;AACxB,CAAC,CAAC;AAEF,IAAM,GAAG,GAAG,MAAM,EAAE,CAAC;AACrB,IAAM,OAAO,GAAG,UAAU,EAAE,CAAC;AAE7B,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC","sourcesContent":["declare const wx: any; // 微信小程序、微信小游戏\ndeclare const my: any; // 支付宝小程序\ndeclare const tt: any; // 字节跳动小程序\ndeclare const dd: any; // 钉钉小程序\ndeclare const qq: any; // QQ 小程序、QQ 小游戏\ndeclare const swan: any; // 百度小程序\ndeclare const uni: any; // uniapp\n\n/**\n * 小程序平台 SDK 接口\n */\ninterface SDK {\n  request: Function;\n  httpRequest?: Function; // 针对钉钉小程序\n  getSystemInfoSync: Function;\n  onError?: Function;\n  onUnhandledRejection?: Function;\n  onPageNotFound?: Function;\n  onMemoryWarning?: Function;\n  getLaunchOptionsSync?: Function;\n}\n\n/**\n * 小程序平台 接口\n */\ntype AppName =\n  | \"wechat\"\n  | \"alipay\"\n  | \"bytedance\"\n  | \"dingtalk\"\n  | \"qq\"\n  | \"swan\"\n  | \"unknown\";\n\n/**\n * 获取跨平台的 SDK\n */\nconst getSDK = () => {\n \n  let currentSdk: SDK = {\n    // tslint:disable-next-line: no-empty\n    request: () => {},\n    // tslint:disable-next-line: no-empty\n    httpRequest: () => {},\n    // tslint:disable-next-line: no-empty\n    getSystemInfoSync: () => {},\n  };\n\n  if (typeof wx === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = wx;\n  } else if (typeof my === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = my;\n  } else if (typeof tt === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = tt;\n  } else if (typeof dd === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = dd;\n  } else if (typeof qq === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = qq;\n  } else if (typeof swan === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = swan;\n  } else if (typeof uni === \"object\") {\n    // tslint:disable-next-line: no-unsafe-any\n    currentSdk = uni;\n  } else {\n    try {\n      // 如果已经有Taro依赖，就使用Taro对象\n      // tslint:disable-next-line: no-implicit-dependencies\n      // tslint:disable-next-line: no-unsafe-any\n      currentSdk = require('@tarojs/taro');\n    } catch(e) {\n      throw new Error(\"sentry-miniapp 暂不支持此平台\");\n    }\n  }\n\n  return currentSdk;\n};\n\n/**\n * 获取平台名称\n */\nconst getAppName = () => {\n  let currentAppName: AppName = \"unknown\";\n\n  if (typeof wx === \"object\") {\n    currentAppName = \"wechat\";\n  } else if (typeof my === \"object\") {\n    currentAppName = \"alipay\";\n  } else if (typeof tt === \"object\") {\n    currentAppName = \"bytedance\";\n  } else if (typeof dd === \"object\") {\n    currentAppName = \"dingtalk\";\n  } else if (typeof qq === \"object\") {\n    currentAppName = \"qq\";\n  } else if (typeof swan === \"object\") {\n    currentAppName = \"swan\";\n  }\n\n  return currentAppName;\n};\n\nconst sdk = getSDK();\nconst appName = getAppName();\n\nexport { sdk, appName };\n"]}